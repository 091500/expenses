<p id="notice"><%= notice %></p>

<div class="col-md-3">

  <div class="list-group">
    <%= link_to 'Incomes', { controller: '/categories', action: 'index', record_type: 1 }, class: 'list-group-item' %>
    <%= link_to 'Expences', { controller: '/categories', action: 'index', record_type: 0 }, class: 'list-group-item' %>
    <%= link_to 'Reports', moneyrecords_path, class: 'list-group-item' %>
  </div>

</div>

<div class="col-md-9">

  <% sum_income = 0 %>
  <% sum_expense = 0 %>

  <div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading">Your personal expenses/incomes</div>

    <!-- Table -->
    <table class="table table-striped">
      <thead>
      <tr>
        <th>Comment</th>
        <th>Category</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Date</th>
        <th colspan="3"></th>
      </tr>
      </thead>
      <tbody>
      <tbody>
      <% @moneyrecords.each do |moneyrecord| %>
        <tr>
          <td><%= moneyrecord.name %></td>
          <td><%= moneyrecord.category.name %></td>
          <td><%= moneyrecord.category.record_type == 1 ? 'Income' : 'Expense' %></td>
          <td><%= moneyrecord.amount %></td>
          <td><%= moneyrecord.created_at %></td>
          <td><%= link_to 'Show', moneyrecord %></td>
          <td><%= link_to 'Edit', edit_moneyrecord_path(moneyrecord) %></td>
          <td><%= link_to 'Destroy', moneyrecord, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
        <% sum_income += moneyrecord.amount if moneyrecord.category.record_type == 1 and !moneyrecord.amount.nil? %>
        <% sum_expense += moneyrecord.amount if moneyrecord.category.record_type == 0 and !moneyrecord.amount.nil? %>
      <% end %>
      <tr>
        <td colspan="3">Balance</td>
        <td><%= sum_income-sum_expense %></td>
        <td colspan="4"></td>
      </tr>
      </tbody>
    </table>

  </div>

  <%= link_to 'Add new record', new_moneyrecord_path, class: 'btn btn-sm btn-primary' %>

</div>